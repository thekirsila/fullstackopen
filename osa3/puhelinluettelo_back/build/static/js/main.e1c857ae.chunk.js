(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{20:function(e,n,t){},39:function(e,n,t){},40:function(e,n,t){"use strict";t.r(n);var c=t(0),o=t(2),a=t.n(o),i=t(14),r=t.n(i),u=(t(20),t(3)),s=t(4),d=t.n(s),h="https://stormy-savannah-57151.herokuapp.com/api/persons",l=function(){return d.a.get(h)},b=function(e){return d.a.post(h,e)},f=function(e,n){return d.a.put("".concat(h,"/").concat(e),n)},j=function(e){return d.a.delete("".concat(h,"/").concat(e))},m=(t(39),function(e){return Object(c.jsx)("div",{className:e.notificationState,children:e.message})}),O=function(e){return Object(c.jsxs)("div",{children:["Search: ",Object(c.jsx)("input",{value:e.newSearch,onChange:e.handleSearchChange})]})},v=function(e){return Object(c.jsxs)("form",{onSubmit:e.addPerson,children:[Object(c.jsxs)("div",{children:["name: ",Object(c.jsx)("input",{value:e.newName,onChange:e.handleNameChange}),Object(c.jsx)("br",{}),"number: ",Object(c.jsx)("input",{value:e.newNumber,onChange:e.handleNumberChange})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"add"})})]})},w=function(e){return Object(c.jsx)("div",{children:e.personsToShow.map((function(n){return Object(c.jsx)(g,{name:n.name,number:n.number,removeOne:function(){return function(n){var t=e.personsToShow.filter((function(e){return e.id==n}))[0].name;window.confirm("Do you really wish to delete "+t)&&j(n).then((function(){l().then((function(n){e.setPersons(n.data),e.showNotification("".concat(t," was removed successfully"),"notification")}))})).catch((function(e){}))}(n.id)}},n.id)}))})},g=function(e){return Object(c.jsxs)("div",{children:[e.name," ",e.number,Object(c.jsx)("button",{onClick:e.removeOne,children:"Remove"})]})},p=function(){var e=Object(o.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],i=Object(o.useState)(""),r=Object(u.a)(i,2),s=r[0],d=r[1],h=Object(o.useState)(""),j=Object(u.a)(h,2),g=j[0],p=j[1],x=Object(o.useState)(""),C=Object(u.a)(x,2),S=C[0],N=C[1],y=Object(o.useState)(""),L=Object(u.a)(y,2),P=L[0],k=L[1],T=Object(o.useState)("notification-disabled"),F=Object(u.a)(T,2),D=F[0],B=F[1];Object(o.useEffect)((function(){l().then((function(e){a(e.data)}))}),[]);var E=0==S.value?t:t.filter((function(e){return e.name.toLowerCase().includes(S.toLowerCase())})),I=function(e,n){k(e),B("notification"==n?"notification-enabled":"error-enabled"),setTimeout((function(){return B("disabled")}),3e3)};return Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Phonebook"}),Object(c.jsx)(m,{notificationState:D,message:P}),Object(c.jsx)(O,{newSearch:S,handleSearchChange:function(e){N(e.target.value)}}),Object(c.jsx)("h2",{children:"Add new entry"}),Object(c.jsx)(v,{addPerson:function(e){e.preventDefault();var n={name:s,number:g,id:0!=t.length?t[t.length-1].id+1:1};t.filter((function(e){return e.name.toLowerCase()===s.toLowerCase()})).length>0?window.confirm("".concat(s," is already added to phonebook, replace the old number with the new one?"))&&(f(t.find((function(e){return e.name.toLowerCase()===s.toLowerCase()})).id,n).then((function(){l().then((function(e){a(e.data),I("".concat(s," changed successfully"),"notification")}))})).catch((function(e){I("".concat(s," has already been removed from server, updating..."),"error"),l().then((function(e){a(e.data)}))})),d(""),p("")):(b(n).then((function(){a(t.concat(n)),I("".concat(s," added successfully"),"notification")})),d(""),p(""))},newName:s,newNumber:g,handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){p(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),Object(c.jsx)(w,{showNotification:I,personsToShow:E,setPersons:a})]})},x=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,41)).then((function(n){var t=n.getCLS,c=n.getFID,o=n.getFCP,a=n.getLCP,i=n.getTTFB;t(e),c(e),o(e),a(e),i(e)}))};r.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(p,{})}),document.getElementById("root")),x()}},[[40,1,2]]]);
//# sourceMappingURL=main.e1c857ae.chunk.js.map